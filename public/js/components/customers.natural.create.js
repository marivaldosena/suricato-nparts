(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{108:function(t,e,r){"use strict";r.r(e);var n=r(1),o=r(3),s=r(6),i=r.n(s),a=r(11).a.init(),u={name:"Create",components:{Alert:o.a,Multiselect:i.a},data:function(){return{users:[],username:"",cpf:"",rg:"",birthday:"",gender:"",submitted:!1,error:!1,isLoading:!1}},validations:{username:{required:n.required},cpf:{required:n.required,maxLength:Object(n.maxLength)(14),cpf:function(t){return/^([0-9]{2}[\.]?[0-9]{3}[\.]?[0-9]{3}[\/]?[0-9]{4}[-]?[0-9]{2})|([0-9]{3}[\.]?[0-9]{3}[\.]?[0-9]{3}[-]?[0-9]{2})$/.test(t)}},rg:{maxLength:Object(n.maxLength)(14)},birthday:{date:function(t){return/^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)((19)[6-9][0-9])$/.test(t)}},gender:{gender:function(t){return!t||/^(M|F)$/.test(t)}}},created:function(){this.getUsers()},methods:{getUsers:function(t){var e=this;this.isLoading=!0,a.unusedCustomerUsers(2,t).then(function(t){e.isLoading=!1,e.users=t.data})},handleSubmit:function(){var t=this;if(this.$v.$touch(),this.submitted=!0,this.$v.$invalid)this.submitted=!1;else{var e=this.cpf.replace(/\D+/g,""),r=this.$moment(this.birthday,"DD/MM/YYYY").format("YYYY-MM-DD");a.store({cpf:e,rg:this.rg,birthday:r,gender:this.gender,user_id:this.username.id}).then(function(e){t.submitted=!1,t.$store.dispatch("setAlert",{type:"success",message:"Cliente criado.",show:!0}).then(function(){}),t.$router.push("/admin/customers/natural")},function(e){t.submitted=!1})}}}},c=(r(20),r(0)),l=Object(c.a)(u,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"col-12"},[r("form",{attrs:{id:"",method:"post",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("Alert"),t._v(" "),r("div",{staticClass:"form-group",class:{"form-group--error":t.$v.username.$error}},[r("label",{staticClass:"typo__label"},[t._v("Selecione um usuário")]),t._v(" "),r("Multiselect",{attrs:{id:"ajax",label:"name",selectLabel:"Pressione enter para selecionar",selectedLabel:"Selecionado",deselectLabel:"Pressione enter para remover",placeholder:"Digite um nome","open-direction":"bottom",options:t.users,searchable:!0,loading:t.isLoading},on:{"search-change":t.getUsers},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}},[r("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Oops! No elements found. Consider changing the search query.")])]),t._v(" "),t.$v.username.$error?r("div",{staticClass:"error"},[t.$v.username.required?t._e():r("div",{staticClass:"error-msg"},[t._v("Usuário requerido")])]):t._e()],1),t._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-6",class:{"form-group--error":t.$v.cpf.$error}},[r("label",{attrs:{for:"cpf"}},[t._v("Cpf")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.cpf.$model,expression:"$v.cpf.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"cpf",placeholder:"xxx.xxx.xxx-xx"},domProps:{value:t.$v.cpf.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.cpf,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.cpf.$error?r("div",{staticClass:"error"},[t.$v.cpf.required?t._e():r("div",{staticClass:"error-msg"},[t._v("Cpf requerido")]),t._v(" "),t.$v.cpf.maxLength?t._e():r("div",{staticClass:"error-msg"},[t._v("Cpf inválido")])]):t._e()]),t._v(" "),r("div",{staticClass:"form-group col-6",class:{"form-group--error":t.$v.rg.$error}},[r("label",{attrs:{for:"rg"}},[t._v("Rg")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.rg.$model,expression:"$v.rg.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"rg",placeholder:"xx.xxx.xxx-x"},domProps:{value:t.$v.rg.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.rg,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.rg.$error?r("div",{staticClass:"error"},[t.$v.rg.maxLength?t._e():r("div",{staticClass:"error-msg"},[t._v("Rg inválido")])]):t._e()])]),t._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-6",class:{"form-group--error":t.$v.birthday.$error}},[r("label",{attrs:{for:"birthday"}},[t._v("Data nascimento")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.birthday.$model,expression:"$v.birthday.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"birthday",placeholder:"dd/mm/aaaa"},domProps:{value:t.$v.birthday.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.birthday,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.birthday.$error?r("div",{staticClass:"error"},[t.$v.birthday.required?t._e():r("div",{staticClass:"error-msg"},[t._v("Data de nascimento requerida")]),t._v(" "),t.$v.birthday.maxLength?t._e():r("div",{staticClass:"error-msg"},[t._v("Data de nascimento inválida")])]):t._e()]),t._v(" "),r("div",{staticClass:"form-group col-6",class:{"form-group--error":t.$v.gender.$error}},[r("label",{attrs:{for:"gender"}},[t._v("Sexo")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.gender.$model,expression:"$v.gender.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"gender"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.$v.gender,"$model",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:""}},[t._v("Indefinido")]),t._v(" "),r("option",{attrs:{value:"M"}},[t._v("Masculino")]),t._v(" "),r("option",{attrs:{value:"F"}},[t._v("Feminino")])])])]),t._v(" "),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.submitted}},[t._v("Salvar")])],1)])])},[],!1,null,"47a7a792",null);e.default=l.exports},11:function(t,e,r){"use strict";r.d(e,"a",function(){return c});var n=r(8);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).apply(this,arguments))}var r,o,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,n["a"]),r=e,c=[{key:"init",value:function(){return new this("customers/natural")}}],(o=[{key:"status",value:function(t){return this.http.put("customers/status/".concat(this.getId(t)),t).then(this.constructor.then)}},{key:"unusedCustomerUsers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="users/unused-users/".concat(t);return e&&(r="users/unused-users/".concat(t,"/").concat(e)),this.http.get(r).then(this.constructor.then)}}])&&s(r.prototype,o),c&&s(r,c),e}()},3:function(t,e,r){"use strict";var n=r(9);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s={name:"Message",props:{message:{type:[String,Object]}},render:function(t){var e=this;return"object"===o(this.message)?t("ul",Object.keys(this.message).map(function(r){return e.message[r].map(function(e){return t("li",e)})})):t("div",this.message)}},i=r(0);function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){u(t,e,r[e])})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={name:"Alert",components:{Message:Object(i.a)(s,void 0,void 0,!1,null,"3f59c554",null).exports},methods:a({},Object(n.b)(["setAlert","clearAlert"])),computed:a({},Object(n.c)({type:function(t){return t.alert.type},show:function(t){return t.alert.show},message:function(t){return t.alert.message}}))},l=Object(i.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return this.show?r("div",{class:"alert alert-dismissible alert-"+this.type,attrs:{role:"alert"}},[r("Message",{attrs:{message:this.message}}),t._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.clearAlert()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])],1):t._e()},[],!1,null,"b68b6744",null);e.a=l.exports},8:function(t,e,r){"use strict";r.d(e,"a",function(){return u});var n=r(4),o=r.n(n);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"resource",""),a(this,"id","id"),!e)throw new Error("The child service class did not provide the resource.");this.resource=e,this.http=o.a.axios}var e,r,n;return e=t,n=[{key:"then",value:function(t){return t.data?"string"==typeof t.data?JSON.parse(t.data):t.data:{}}}],(r=[{key:"index",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.http.get("".concat(this.resource).concat(t)).then(this.constructor.then)}},{key:"store",value:function(t){return this.http.post("".concat(this.resource),t).then(this.constructor.then)}},{key:"show",value:function(t){return this.http.get("".concat(this.resource,"/").concat(this.getId(t))).then(this.constructor.then)}},{key:"update",value:function(t){return this.http.put("".concat(this.resource,"/").concat(this.getId(t)),t).then(this.constructor.then)}},{key:"destroy",value:function(t){return this.http.delete("".concat(this.resource,"/").concat(this.getId(t))).then(this.constructor.then)}},{key:"getId",value:function(t){return"object"===s(t)?t[this.id]:String(t)}}])&&i(e.prototype,r),n&&i(e,n),t}()}}]);