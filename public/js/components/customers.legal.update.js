(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{103:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r(3),a=r(6),s=r.n(a),i=r(12).a.init(),c={name:"Create",components:{Alert:o.a,Multiselect:s.a},data:function(){return{users:[],username:"",id:0,cnpj:"",company_name:"",trade_name:"",state_registration:"",submitted:!1,error:!1,isLoading:!1}},validations:{username:{required:n.required},cnpj:{required:n.required,maxLength:Object(n.maxLength)(18),cnpj:function(e){return/^([0-9]{2}[\.]?[0-9]{3}[\.]?[0-9]{3}[\/]?[0-9]{4}[-]?[0-9]{2})|([0-9]{3}[\.]?[0-9]{3}[\.]?[0-9]{3}[-]?[0-9]{2})$/.test(e)}},company_name:{required:n.required},trade_name:{required:n.required},state_registration:{}},created:function(){var e=this,t=this.$route.params.id;i.show(t).then(function(t){var r=t.data,n=r.user,o=r.legal_person_info;e.username=n,e.id=t.data.id,e.cnpj=o.cnpj,e.company_name=o.company_name,e.trade_name=o.trade_name,e.state_registration=o.state_registration}),this.getUsers()},methods:{getUsers:function(e){var t=this;this.isLoading=!0,i.unusedCustomerUsers(3,e).then(function(e){t.isLoading=!1,t.users=e.data})},handleSubmit:function(){var e=this;if(this.$v.$touch(),this.submitted=!0,this.$v.$invalid)this.submitted=!1;else{var t=this.cnpj.replace(/\D+/g,"");i.update({id:this.id,cnpj:t,company_name:this.company_name,trade_name:this.trade_name,state_registration:this.state_registration,user_id:this.username.id}).then(function(t){e.submitted=!1,e.$store.dispatch("setAlert",{type:"success",message:"Cliente alterado.",show:!0}).then(function(){}),e.$router.push("/admin/customers/legal")},function(t){e.submitted=!1})}}}},u=(r(20),r(0)),l=Object(u.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"col-12"},[r("form",{attrs:{id:"",method:"post",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("Alert"),e._v(" "),r("div",{staticClass:"form-group",class:{"form-group--error":e.$v.username.$error}},[r("label",{staticClass:"typo__label"},[e._v("Selecione um usuário")]),e._v(" "),r("Multiselect",{attrs:{id:"ajax",label:"name",selectLabel:"Pressione enter para selecionar",selectedLabel:"Selecionado",deselectLabel:"Pressione enter para remover",placeholder:"Digite um nome","open-direction":"bottom",options:e.users,searchable:!0,loading:e.isLoading},on:{"search-change":e.getUsers},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[r("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No elements found. Consider changing the search query.")])]),e._v(" "),e.$v.username.$error?r("div",{staticClass:"error"},[e.$v.username.required?e._e():r("div",{staticClass:"error-msg"},[e._v("Usuário requerido")])]):e._e()],1),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-6",class:{"form-group--error":e.$v.cnpj.$error}},[r("label",{attrs:{for:"cnpj"}},[e._v("Cnpj")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.cnpj.$model,expression:"$v.cnpj.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"cnpj",placeholder:"xx.xxx.xxx/xxxx-xx"},domProps:{value:e.$v.cnpj.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.cnpj,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e.$v.cnpj.$error?r("div",{staticClass:"error"},[e.$v.cnpj.required?e._e():r("div",{staticClass:"error-msg"},[e._v("Cnpj requerido")]),e._v(" "),e.$v.cnpj.maxLength&&e.$v.cnpj.cnpj?e._e():r("div",{staticClass:"error-msg"},[e._v("Cnpj inválido")])]):e._e()]),e._v(" "),r("div",{staticClass:"form-group col-6",class:{"form-group--error":e.$v.company_name.$error}},[r("label",{attrs:{for:"company_name"}},[e._v("Razão Social")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.company_name.$model,expression:"$v.company_name.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"company_name",placeholder:"Razão Social"},domProps:{value:e.$v.company_name.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.company_name,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e.$v.company_name.$error?r("div",{staticClass:"error"},[e.$v.company_name.maxLength?e._e():r("div",{staticClass:"error-msg"},[e._v("Razão Social requerido")])]):e._e()])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-6",class:{"form-group--error":e.$v.trade_name.$error}},[r("label",{attrs:{for:"trade_name"}},[e._v("Nome fantasia")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.trade_name.$model,expression:"$v.trade_name.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"trade_name",placeholder:"Nome fantasia"},domProps:{value:e.$v.trade_name.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.trade_name,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e.$v.trade_name.$error?r("div",{staticClass:"error"},[e.$v.trade_name.required?e._e():r("div",{staticClass:"error-msg"},[e._v("Nome Fantasia requerido")])]):e._e()]),e._v(" "),r("div",{staticClass:"form-group col-6",class:{"form-group--error":e.$v.state_registration.$error}},[r("label",{attrs:{for:"state_registration"}},[e._v("Inscrição Estadual")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.state_registration.$model,expression:"$v.state_registration.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"state_registration",placeholder:"Inscrição Estadual"},domProps:{value:e.$v.state_registration.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.state_registration,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.submitted}},[e._v("Salvar")])],1)])])},[],!1,null,"ac3429de",null);t.default=l.exports},12:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(8);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,i(t).apply(this,arguments))}var r,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,n["a"]),r=t,u=[{key:"init",value:function(){return new this("customers/legal")}}],(o=[{key:"status",value:function(e){return this.http.put("customers/status/".concat(this.getId(e)),e).then(this.constructor.then)}},{key:"unusedCustomerUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="users/unused-users/".concat(e);return t&&(r="users/unused-users/".concat(e,"/").concat(t)),this.http.get(r).then(this.constructor.then)}}])&&a(r.prototype,o),u&&a(r,u),t}()},3:function(e,t,r){"use strict";var n=r(9);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a={name:"Message",props:{message:{type:[String,Object]}},render:function(e){var t=this;return"object"===o(this.message)?e("ul",Object.keys(this.message).map(function(r){return t.message[r].map(function(t){return e("li",t)})})):e("div",this.message)}},s=r(0);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={name:"Alert",components:{Message:Object(s.a)(a,void 0,void 0,!1,null,"3f59c554",null).exports},methods:i({},Object(n.b)(["setAlert","clearAlert"])),computed:i({},Object(n.c)({type:function(e){return e.alert.type},show:function(e){return e.alert.show},message:function(e){return e.alert.message}}))},l=Object(s.a)(u,function(){var e=this,t=e.$createElement,r=e._self._c||t;return this.show?r("div",{class:"alert alert-dismissible alert-"+this.type,attrs:{role:"alert"}},[r("Message",{attrs:{message:this.message}}),e._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(t){return e.clearAlert()}}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])],1):e._e()},[],!1,null,"b68b6744",null);t.a=l.exports},8:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(4),o=r.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"resource",""),i(this,"id","id"),!t)throw new Error("The child service class did not provide the resource.");this.resource=t,this.http=o.a.axios}var t,r,n;return t=e,n=[{key:"then",value:function(e){return e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:{}}}],(r=[{key:"index",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.http.get("".concat(this.resource).concat(e)).then(this.constructor.then)}},{key:"store",value:function(e){return this.http.post("".concat(this.resource),e).then(this.constructor.then)}},{key:"show",value:function(e){return this.http.get("".concat(this.resource,"/").concat(this.getId(e))).then(this.constructor.then)}},{key:"update",value:function(e){return this.http.put("".concat(this.resource,"/").concat(this.getId(e)),e).then(this.constructor.then)}},{key:"destroy",value:function(e){return this.http.delete("".concat(this.resource,"/").concat(this.getId(e))).then(this.constructor.then)}},{key:"getId",value:function(e){return"object"===a(e)?e[this.id]:String(e)}}])&&s(t.prototype,r),n&&s(t,n),e}()}}]);